{{! Default template for token diff reports }}
{{! This template generates markdown-style output similar to the existing markdown formatter }}

**Tokens Changed ({{totalTokens result}})**

{{#if options.oldTokenBranch}}
{{options.oldTokenBranch}} | {{/if}}{{#if options.oldTokenVersion}}
{{options.oldTokenVersion}} | {{/if}}{{#if options.newTokenBranch}}
**{{options.newTokenBranch}}**{{/if}}{{#if options.newTokenVersion}}
**{{options.newTokenVersion}}**{{/if}}

-------------------------------------------------------------------------------------------

{{#if (hasKeys result.renamed)}}
<details open><summary>

**Renamed ({{renamed.length}})**

</summary>

{{#each renamed}}
- `{{oldName}}` -> `{{name}}`
{{/each}}

</details>
{{/if}}
{{#if (hasKeys result.deprecated)}}
<details open><summary>

**Newly Deprecated ({{deprecated.length}})**

</summary>

{{#each deprecated}}
- `{{name}}`{{#if comment}}: {{comment}}{{/if}}
{{/each}}

</details>
{{/if}}
{{#if (hasKeys result.reverted)}}
<details open><summary>

**Newly "Un-deprecated" ({{reverted.length}})**

</summary>

{{#each reverted}}
- `{{name}}`
{{/each}}

</details>
{{/if}}

{{#if (hasKeys result.added)}}
<details open><summary>

**Added ({{added.length}})**

</summary>
{{#each added}}
- `{{name}}`
{{/each}}

</details>
{{/if}}
{{#if (hasKeys result.deleted)}}
<details open><summary>

**Deleted ({{deleted.length}})**

</summary>
{{#each deleted}}
- `{{name}}`
{{/each}}

</details>
{{/if}}
{{#if (totalUpdatedTokens result.updated)}}

**Updated ({{totalUpdatedTokens result.updated}})**

{{#if (hasKeys result.updated.renamed)}}
<details open><summary>

**Renamed Properties ({{updated.renamed.length}})**

</summary>

{{#each updated.renamed}}
- `{{name}}`
{{#each changes}}
  - `{{cleanPath path}}`: {{#if (ifEquals type "schema")}}`{{lastPathPart originalValue}}` -> `{{lastPathPart newValue}}`{{else}}`{{originalValue}}` -> `{{newValue}}`{{/if}}
{{/each}}
{{/each}}

</details>
{{/if}}

{{#if (hasKeys result.updated.added)}}
<details open><summary>

**Added Properties ({{updated.added.length}})**

</summary>
{{#each updated.added}}
- `{{name}}`
{{#each changes}}
  - `{{cleanPath path}}`: `{{newValue}}`
{{/each}}
{{/each}}

</details>
{{/if}}

{{#if (hasKeys result.updated.deleted)}}
<details open><summary>

**Deleted Properties ({{updated.deleted.length}})**

</summary>
{{#each updated.deleted}}
- `{{name}}`
{{#each changes}}
  - `{{cleanPath path}}`: {{#if (ifEquals type "schema")}}`{{lastPathPart originalValue}}` -> `{{lastPathPart newValue}}`{{else}}{{originalValue}} -> `{{newValue}}`{{/if}}
{{/each}}
{{/each}}

</details>
{{/if}}

{{#if (hasKeys result.updated.updated)}}
<details open><summary>

&ensp;&ensp;**Updated Properties ({{updated.updated.length}})**

</summary>
{{#each updated.updated}}
- `{{name}}`
{{#each changes}}
  - `{{cleanPath path}}`: {{#if (ifEquals type "schema")}}`{{lastPathPart originalValue}}` -> `{{lastPathPart newValue}}`{{else}}`{{originalValue}}` -> `{{newValue}}`{{/if}}
{{/each}}
{{/each}}

</details>
{{/if}}
{{/if}}